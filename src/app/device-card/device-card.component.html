<div class="container">
  <div class="row">
    <div class="col-md-4" *ngFor="let device_id of device_id">
      <!-- link -->
      <div class="bg-white mb-5 p-4 rounded-5 shadow-sm">
        <div>
          <img src="/assets/img/img1.jpg" class="card-img-top rounded-4" alt="..." />
        </div>
        <div class="h3 mb-3">Device ID: {{ device_id }}</div>

        <!-- details -->
        <div class="text-dark">
          <p>Details: {{ latestDeviceData[device_id]?.device_detail }}</p>
          <p>Location: {{ latestDeviceData[device_id]?.device_location }}</p>
          <p>Map: {{ latestDeviceData[device_id]?.device_map_img }}</p>
          <p>Type: {{ latestDeviceData[device_id]?.device_type }}</p>
          <p>Group: {{ latestDeviceData[device_id]?.group_id }}</p>
          <!-- แสดงข้อมูลอื่น ๆ ตามที่คุณต้องการ -->
        </div>

        <a [routerLink]="['/dashboard-component']" [queryParams]="{ device_id: device_id }">
            <i class="bi bi-box-arrow-in-right me-3" style="font-size: 30px;"></i>
        </a>
       <!-- ใน HTML ของ DeviceCardComponent -->
<!-- ปุ่มแก้ไขข้อมูล -->

<button (click)="enableEditMode(device_id)" class="btn" data-bs-toggle="modal" data-bs-target="#editModal">
  <i class="bi bi-pencil-square text-primary" style="font-size: 26px"></i>
</button>

<button (click)="deleteData(device_id)" class="btn">
  <i class="bi bi-trash-fill text-danger" style="font-size: 26px"></i>
</button>


<!-- แก้ไขข้อมูล -->
<!-- Modal Template -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Edit Device</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Edit form goes here -->
        <form (submit)="saveData()">
          <!-- Add your form fields here -->
          <div class="form-group">
            <label for="device_id">Device ID:</label>
            <input type="text" class="form-control" id="device_id" [(ngModel)]="editedData.device_id" name="device_id" readonly />
          </div>
          <div class="form-group">
            <label for="device_name">Device Name:</label>
            <input type="text" class="form-control" id="device_name" [(ngModel)]="editedData.device_name" name="device_name" />
          </div>
          <div class="form-group">
            <label for="device_detail">Device Detail:</label>
            <input type="text" class="form-control" id="device_detail" [(ngModel)]="editedData.device_detail" name="device_detail" />
          </div>
          <div class="form-group">
            <label for="device_location">Device Location:</label>
            <input type="text" class="form-control" id="device_location" [(ngModel)]="editedData.device_location" name="device_location" />
          </div>
          <div class="form-group">
            <label for="device_map">Device Map:</label>
            <input type="text" class="form-control" id="device_map" [(ngModel)]="editedData.device_map" name="device_map" />
          </div>
          <div class="form-group">
            <label for="device_type">Device Type:</label>
            <select class="form-control" id="device_type" [(ngModel)]="editedData.device_type" name="device_type" required>
              <option [value]="">Select Device Type</option>
              <option value="1">ESP</option>
              <option value="2">Tuya</option>
            </select>
          </div>
          
          <!-- Group ID -->
          <div class="form-group">
            <label for="group_id">Group ID:</label>
            <select class="form-control" id="group_id" [(ngModel)]="editedData.group_id" name="group_id" required>
              <option [value]="">Select Group ID</option>
              <option value="1">A</option>
              <option value="2">B</option>
            </select>
          </div>
          
        





          
          
          
          
          <!-- Add more fields as needed -->
          <button type="submit" class="btn btn-success" data-bs-dismiss="modal">Save</button>
          <button (click)="cancelEditMode()" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </form>
      </div>
    </div>
  </div>
</div>



      </div>

    </div>
  </div>
</div>




